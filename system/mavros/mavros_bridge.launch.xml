<launch>

    <arg name="vehicle_namespace" default="$(env VEHICLE_NAMESPACE vehicle_$(env MAVROS_TGT_SYSTEM 1))" />
    <arg name="firmware" default="$(env MAVROS_TGT_FIRMWARE px4)" />
    <arg name="fcu_url" default="$(env MAVROS_FCU_URL udp://:14550@)"/>
    <arg name="gcs_url" default="$(env MAVROS_GCS_URL udp-pb://@:14553)" />
    <arg name="target_system" default="$(env MAVROS_TGT_SYSTEM 1)" />
    <arg name="system_id" default="$(env MAVROS_TGT_SYSTEM 1)" />
    
    <!-- Launch the ROS1 stack -->
    <executable cmd="/ros_ws/scripts/run_ros1.sh roslaunch /ros_ws/launch/mavros.launch
            vehicle_namespace:=$(var vehicle_namespace)
            firmware:=$(var firmware)
            fcu_url:=$(var fcu_url)
            gcs_url:=$(var gcs_url)
            target_system:=$(var target_system)
            system_id:=$(var system_id)"
        output="screen"
    />

    <!-- Launch the bridge -->
    <node pkg="ros1_bridge" exec="dynamic_bridge" args="--bridge-all-1to2-topics" />

</launch>